<div id="cardContainer" class="w-100 d-flex flex-wrap justify-content-center">

</div>  

<div id="card" class="m-2 cursor-pointer" hidden onclick="selectCard(this)">
    <div class="product-category-card">
        <img id="cardImage" class="w-100 h-100" src="{{product.img}}">
        <div id="cardImageOverlay" class="image-overlay">
        </div>
    </div>
    <div id="cardLabel" class="text-center product-name font-weight-bold"></div>
</div>

<!-- active card class::::  product-category-card-active -->
<!-- active product name::::: product-name-active -->

<script>

   

    const cardContainerEl = document.getElementById('cardContainer');
    const dataVariableName = cardContainerEl.parentElement.getAttribute('data');
    console.log('Variable name:', dataVariableName);
    const cardsData = window[dataVariableName];
    console.log('===', cardsData)
    
    for(let i=0; i<cardsData.length; i++){
        const cardData = cardsData[i];
        const cardEl = document.querySelector('#card').cloneNode(true);
        cardEl.setAttribute('id', 'card'+i );
        cardEl.querySelector('#cardImage').src = cardData.imgUrl
        cardEl.querySelector('#cardImageOverlay').setAttribute('hidden','');
        cardEl.removeAttribute('hidden');
        cardEl.querySelector('#cardLabel').innerHTML = cardData.name;
        cardContainerEl.appendChild(cardEl);
        console.log('child ', cardData, ' appended')
    }

    function selectCard(el) {
        removeAllSelection();
        el.querySelector('#cardImageOverlay').removeAttribute('hidden');
        el.querySelector('#cardLabel').classList.add('product-name-active');
        window.selectedCards = [ parseInt( el.getAttribute('id').replace('card', '') ) + 1 ]
    }

    function removeAllSelection() {
        for(let i=0; i<cardsData.length; i++){
            const cardData = cardsData[i];
            const cardEl = document.querySelector('#card'+i);
            cardEl.querySelector('#cardImageOverlay').setAttribute('hidden', '');
            cardEl.querySelector('#cardLabel').classList.remove('product-name-active');
        }
    }
    
</script>